ô
LC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\Account.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public

 

partial

 
class

 
Account

  
{ 
[ 	
System	 
. 
Diagnostics 
. 
CodeAnalysis (
.( )
SuppressMessage) 8
(8 9
$str9 J
,J K
$strL ~
)~ 
]	 Ä
public 
Account 
( 
) 
{ 	
} 	
[ 	
Key	 
] 
[ 	

ForeignKey	 
( 
$str 
) 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
EmailAddress "
{# $
get% (
;( )
set* -
;- .
}/ 0
[ 	
Required	 
] 
public   
string   
Username   
{    
get  ! $
;  $ %
set  & )
;  ) *
}  + ,
[%% 	
Required%%	 
]%% 
[&& 	
StringLength&&	 
(&& 
$num&& 
)&& 
]&& 
public'' 
string'' 
Password'' 
{''  
get''! $
;''$ %
set''& )
;'') *
}''+ ,
[,, 	
StringLength,,	 
(,, 
$num,, 
),, 
],, 
public-- 
string-- 
Salt-- 
{-- 
get--  
;--  !
set--" %
;--% &
}--' (
public22 
bool22 
EmailWasVerified22 $
{22% &
get22' *
;22* +
set22, /
;22/ 0
}221 2
[77 	
StringLength77	 
(77 
$num77 
)77 
]77 
public88 
string88 
ActivationToken88 %
{88& '
get88( +
;88+ ,
set88- 0
;880 1
}882 3
[== 	
StringLength==	 
(== 
$num== 
)== 
]== 
public>> 
string>> 
RecoveryToken>> #
{>>$ %
get>>& )
;>>) *
set>>+ .
;>>. /
}>>0 1
publicCC 
virtualCC 
PlayerCC 
PlayerCC $
{CC% &
getCC' *
;CC* +
setCC, /
;CC/ 0
}CC1 2
}DD 
}EE ¨
MC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\CardDeck.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public 

partial 
class 
CardDeck !
{ 
[ 	
System	 
. 
Diagnostics 
. 
CodeAnalysis (
.( )
SuppressMessage) 8
(8 9
$str9 J
,J K
$strL ~
)~ 
]	 Ä
public 
CardDeck 
( 
) 
{ 	
Cards 
= 
new 
HashSet 
<  
Card  $
>$ %
(% &
)& '
;' (
} 	
[ 	
Key	 
] 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 

CardDeckId 
{ 
get  #
;# $
set% (
;( )
}* +
[   	
Required  	 
]   
[!! 	
StringLength!!	 
(!! 
$num!! 
)!! 
]!! 
public"" 
string"" 
Name"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
['' 	
Required''	 
]'' 
public(( 
string(( 
	BackImage(( 
{((  !
get((" %
;((% &
set((' *
;((* +
}((, -
public-- 
int-- 
NumberOfPairs--  
{--! "
get--# &
;--& '
set--( +
;--+ ,
}--- .
[22 	
System22	 
.22 
Diagnostics22 
.22 
CodeAnalysis22 (
.22( )
SuppressMessage22) 8
(228 9
$str229 J
,22J K
$str22L y
)22y z
]22z {
public33 
virtual33 
ICollection33 "
<33" #
Card33# '
>33' (
Cards33) .
{33/ 0
get331 4
;334 5
set336 9
;339 :
}33; <
}44 
}55 î

IC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\Card.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public

 

partial

 
class

 
Card

 
{ 
[ 	
Key	 
] 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 
CardId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

CardDeckId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	

ForeignKey	 
( 
$str  
)  !
]! "
public 
virtual 
CardDeck 
CardDeck  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
[!! 	
Required!!	 
]!! 
public"" 
string"" 

FrontImage""  
{""! "
get""# &
;""& '
set""( +
;""+ ,
}""- .
}## 
}$$  
MC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\MemoryGameContext.cs
	namespace 	

DataAccess
 
{ 
public 

partial 
class 
MemoryGameContext *
:+ ,
	DbContext- 6
{ 
public 
MemoryGameContext  
(  !
)! "
:		 
base		 
(		 
$str		 $
)		$ %
{

 	
var 
ensureDllIsCopied !
=" #
System$ *
.* +
Data+ /
./ 0
Entity0 6
.6 7
	SqlServer7 @
.@ A
SqlProviderServicesA T
.T U
InstanceU ]
;] ^
} 	
public 
virtual 
DbSet 
< 
CardDeck %
>% &
	CardDecks' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
virtual 
DbSet 
< 
Card !
>! "
Cards# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
Match "
>" #
Matches$ +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
virtual 
DbSet 
< 
Player #
># $
Players% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
virtual 
DbSet 
< 
Account $
>$ %
Accounts& .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
	protected 
override 
void 
OnModelCreating  /
(/ 0
DbModelBuilder0 >
modelBuilder? K
)K L
{M N
}O P
} 
} ¯
JC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\Match.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public 

partial 
class 
Match 
{ 
[ 	
System	 
. 
Diagnostics 
. 
CodeAnalysis (
.( )
SuppressMessage) 8
(8 9
$str9 J
,J K
$strL ~
)~ 
]	 Ä
public 
Match 
( 
) 
{ 	
} 	
[ 	
Key	 
] 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 
MatchId 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public$$ 
int$$ 

CardDeckId$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
[%% 	

ForeignKey%%	 
(%% 
$str%%  
)%%  !
]%%! "
public&& 
virtual&& 
CardDeck&& 
CardDeck&&  (
{&&) *
get&&+ .
;&&. /
set&&0 3
;&&3 4
}&&5 6
public++ 
string++ 
EmailAddress++ "
{++# $
get++% (
;++( )
set++* -
;++- .
}++/ 0
[,, 	

ForeignKey,,	 
(,, 
$str,, "
),," #
],,# $
public-- 
virtual-- 
Player-- 
Winner-- $
{--% &
get--' *
;--* +
set--, /
;--/ 0
}--1 2
}.. 
}// û

KC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\Sesion.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public 

class 
Sesion 
{ 
private		 
static		 
Sesion		 
_playerSesion		 +
=		, -
null		. 2
;		2 3
public 
string 
EmailAddress "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
private 
Sesion 
( 
) 
{ 
} 
public 
static 
Sesion 
	GetSesion &
{ 	
get 
{ 
if 
( 
_playerSesion !
==" $
null% )
)) *
{ 
_playerSesion !
=" #
new$ '
Sesion( .
(. /
)/ 0
;0 1
} 
return 
_playerSesion $
;$ %
}   
}!! 	
}"" 
}## Ò
KC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Entities\Player.cs
	namespace 	

DataAccess
 
. 
Entities 
{ 
public		 

partial		 
class		 
Player		 
{

 
[ 	
System	 
. 
Diagnostics 
. 
CodeAnalysis (
.( )
SuppressMessage) 8
(8 9
$str9 J
,J K
$strL ~
)~ 
]	 Ä
public 
Player 
( 
) 
{ 
} 
[ 	
Key	 
] 
public 
string 
EmailAddress "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
Score 
{ 
get 
; 
set  #
;# $
}% &
} 
} √M
dC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Migrations\202101110153060_FinalDatabase.cs
	namespace 	

DataAccess
 
. 

Migrations 
{ 
public 

partial 
class 
FinalDatabase &
:' (
DbMigration) 4
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
CreateTable

 
(

 
$str 
, 
c 
=> 
new 
{ 
EmailAddress $
=% &
c' (
.( )
String) /
(/ 0
nullable0 8
:8 9
false: ?
,? @
	maxLengthA J
:J K
$numL O
)O P
,P Q
Username  
=! "
c# $
.$ %
String% +
(+ ,
nullable, 4
:4 5
false6 ;
); <
,< =
Password  
=! "
c# $
.$ %
String% +
(+ ,
nullable, 4
:4 5
false6 ;
,; <
	maxLength= F
:F G
$numH K
)K L
,L M
Salt 
= 
c  
.  !
String! '
(' (
	maxLength( 1
:1 2
$num3 6
)6 7
,7 8
EmailWasVerified (
=) *
c+ ,
., -
Boolean- 4
(4 5
nullable5 =
:= >
false? D
)D E
,E F
ActivationToken '
=( )
c* +
.+ ,
String, 2
(2 3
	maxLength3 <
:< =
$num> @
)@ A
,A B
RecoveryToken %
=& '
c( )
.) *
String* 0
(0 1
	maxLength1 :
:: ;
$num< >
)> ?
,? @
} 
) 
. 

PrimaryKey 
( 
t 
=>  
t! "
." #
EmailAddress# /
)/ 0
. 

ForeignKey 
( 
$str )
,) *
t+ ,
=>- /
t0 1
.1 2
EmailAddress2 >
)> ?
. 
Index 
( 
t 
=> 
t 
. 
EmailAddress *
)* +
;+ ,
CreateTable 
( 
$str 
, 
c 
=> 
new 
{ 
EmailAddress $
=% &
c' (
.( )
String) /
(/ 0
nullable0 8
:8 9
false: ?
,? @
	maxLengthA J
:J K
$numL O
)O P
,P Q
Score 
= 
c  !
.! "
Int" %
(% &
nullable& .
:. /
false0 5
)5 6
,6 7
}   
)   
.!! 

PrimaryKey!! 
(!! 
t!! 
=>!!  
t!!! "
.!!" #
EmailAddress!!# /
)!!/ 0
;!!0 1
CreateTable## 
(## 
$str$$ 
,$$  
c%% 
=>%% 
new%% 
{&& 

CardDeckId'' "
=''# $
c''% &
.''& '
Int''' *
(''* +
nullable''+ 3
:''3 4
false''5 :
,'': ;
identity''< D
:''D E
true''F J
)''J K
,''K L
Name(( 
=(( 
c((  
.((  !
String((! '
(((' (
nullable((( 0
:((0 1
false((2 7
,((7 8
	maxLength((9 B
:((B C
$num((D G
)((G H
,((H I
	BackImage)) !
=))" #
c))$ %
.))% &
String))& ,
()), -
nullable))- 5
:))5 6
false))7 <
)))< =
,))= >
NumberOfPairs** %
=**& '
c**( )
.**) *
Int*** -
(**- .
nullable**. 6
:**6 7
false**8 =
)**= >
,**> ?
}++ 
)++ 
.,, 

PrimaryKey,, 
(,, 
t,, 
=>,,  
t,,! "
.,," #

CardDeckId,,# -
),,- .
;,,. /
CreateTable.. 
(.. 
$str// 
,// 
c00 
=>00 
new00 
{11 
CardId22 
=22  
c22! "
.22" #
Int22# &
(22& '
nullable22' /
:22/ 0
false221 6
,226 7
identity228 @
:22@ A
true22B F
)22F G
,22G H

CardDeckId33 "
=33# $
c33% &
.33& '
Int33' *
(33* +
nullable33+ 3
:333 4
false335 :
)33: ;
,33; <

FrontImage44 "
=44# $
c44% &
.44& '
String44' -
(44- .
nullable44. 6
:446 7
false448 =
)44= >
,44> ?
}55 
)55 
.66 

PrimaryKey66 
(66 
t66 
=>66  
t66! "
.66" #
CardId66# )
)66) *
.77 

ForeignKey77 
(77 
$str77 +
,77+ ,
t77- .
=>77/ 1
t772 3
.773 4

CardDeckId774 >
,77> ?
cascadeDelete77@ M
:77M N
true77O S
)77S T
.88 
Index88 
(88 
t88 
=>88 
t88 
.88 

CardDeckId88 (
)88( )
;88) *
CreateTable:: 
(:: 
$str;; 
,;; 
c<< 
=><< 
new<< 
{== 
MatchId>> 
=>>  !
c>>" #
.>># $
Int>>$ '
(>>' (
nullable>>( 0
:>>0 1
false>>2 7
,>>7 8
identity>>9 A
:>>A B
true>>C G
)>>G H
,>>H I
Date?? 
=?? 
c??  
.??  !
DateTime??! )
(??) *
nullable??* 2
:??2 3
false??4 9
)??9 :
,??: ;

CardDeckId@@ "
=@@# $
c@@% &
.@@& '
Int@@' *
(@@* +
nullable@@+ 3
:@@3 4
false@@5 :
)@@: ;
,@@; <
EmailAddressAA $
=AA% &
cAA' (
.AA( )
StringAA) /
(AA/ 0
	maxLengthAA0 9
:AA9 :
$numAA; >
)AA> ?
,AA? @
}BB 
)BB 
.CC 

PrimaryKeyCC 
(CC 
tCC 
=>CC  
tCC! "
.CC" #
MatchIdCC# *
)CC* +
.DD 

ForeignKeyDD 
(DD 
$strDD +
,DD+ ,
tDD- .
=>DD/ 1
tDD2 3
.DD3 4

CardDeckIdDD4 >
,DD> ?
cascadeDeleteDD@ M
:DDM N
trueDDO S
)DDS T
.EE 

ForeignKeyEE 
(EE 
$strEE )
,EE) *
tEE+ ,
=>EE- /
tEE0 1
.EE1 2
EmailAddressEE2 >
)EE> ?
.FF 
IndexFF 
(FF 
tFF 
=>FF 
tFF 
.FF 

CardDeckIdFF (
)FF( )
.GG 
IndexGG 
(GG 
tGG 
=>GG 
tGG 
.GG 
EmailAddressGG *
)GG* +
;GG+ ,
}II 	
publicKK 
overrideKK 
voidKK 
DownKK !
(KK! "
)KK" #
{LL 	
DropForeignKeyMM 
(MM 
$strMM (
,MM( )
$strMM* 8
,MM8 9
$strMM: G
)MMG H
;MMH I
DropForeignKeyNN 
(NN 
$strNN (
,NN( )
$strNN* 6
,NN6 7
$strNN8 G
)NNG H
;NNH I
DropForeignKeyOO 
(OO 
$strOO &
,OO& '
$strOO( 4
,OO4 5
$strOO6 E
)OOE F
;OOF G
DropForeignKeyPP 
(PP 
$strPP )
,PP) *
$strPP+ 9
,PP9 :
$strPP; H
)PPH I
;PPI J
	DropIndexQQ 
(QQ 
$strQQ #
,QQ# $
newQQ% (
[QQ( )
]QQ) *
{QQ+ ,
$strQQ- ;
}QQ< =
)QQ= >
;QQ> ?
	DropIndexRR 
(RR 
$strRR #
,RR# $
newRR% (
[RR( )
]RR) *
{RR+ ,
$strRR- 9
}RR: ;
)RR; <
;RR< =
	DropIndexSS 
(SS 
$strSS !
,SS! "
newSS# &
[SS& '
]SS' (
{SS) *
$strSS+ 7
}SS8 9
)SS9 :
;SS: ;
	DropIndexTT 
(TT 
$strTT $
,TT$ %
newTT& )
[TT) *
]TT* +
{TT, -
$strTT. <
}TT= >
)TT> ?
;TT? @
	DropTableUU 
(UU 
$strUU #
)UU# $
;UU$ %
	DropTableVV 
(VV 
$strVV !
)VV! "
;VV" #
	DropTableWW 
(WW 
$strWW %
)WW% &
;WW& '
	DropTableXX 
(XX 
$strXX #
)XX# $
;XX$ %
	DropTableYY 
(YY 
$strYY $
)YY$ %
;YY% &
}ZZ 	
}[[ 
}\\ Å(
TC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Migrations\Configuration.cs
	namespace 	

DataAccess
 
. 

Migrations 
{ 
internal 
sealed 
class 
Configuration '
:( )%
DbMigrationsConfiguration* C
<C D

DataAccessD N
.N O
MemoryGameContextO `
>` a
{ 
public 
Configuration 
( 
) 
{		 	&
AutomaticMigrationsEnabled

 &
=

' (
false

) .
;

. /
} 	
	protected 
override 
void 
Seed  $
($ %

DataAccess% /
./ 0
MemoryGameContext0 A
contextB I
)I J
{ 	
context 
. 
	CardDecks 
. 
AddOrUpdate )
() *
x* +
=>, .
x/ 0
.0 1

CardDeckId1 ;
,; <
new 
CardDeck 
( 
) 
{ 

CardDeckId 
=  
$num! "
," #
Name 
= 
$str -
,- .
	BackImage 
= 
$str  l
,l m
NumberOfPairs !
=" #
$num$ &
,& '
} 
) 
; 
context 
. 
Cards 
. 
AddOrUpdate %
(% &
x& '
=>( *
x+ ,
., -
CardId- 3
,3 4
new 
Card 
( 
) 
{ 
CardId 
= 
$num 
, 

FrontImage 
=  
$str! l
,l m

CardDeckId 
=  
$num! "
} 
, 
new   
Card   
(   
)   
{!! 
CardId"" 
="" 
$num"" 
,"" 

FrontImage## 
=##  
$str##! l
,##l m

CardDeckId$$ 
=$$  
$num$$! "
}%% 
,%% 
new&& 
Card&& 
(&& 
)&& 
{'' 
CardId(( 
=(( 
$num(( 
,(( 

FrontImage)) 
=))  
$str))! l
,))l m

CardDeckId** 
=**  
$num**! "
}++ 
,++ 
new,, 
Card,, 
(,, 
),, 
{-- 
CardId.. 
=.. 
$num.. 
,.. 

FrontImage// 
=//  
$str//! l
,//l m

CardDeckId00 
=00  
$num00! "
}11 
,11 
new22 
Card22 
(22 
)22 
{33 
CardId44 
=44 
$num44 
,44 

FrontImage55 
=55  
$str55! l
,55l m

CardDeckId66 
=66  
$num66! "
}77 
,77 
new88 
Card88 
(88 
)88 
{99 
CardId:: 
=:: 
$num:: 
,:: 

FrontImage;; 
=;;  
$str;;! l
,;;l m

CardDeckId<< 
=<<  
$num<<! "
}== 
,== 
new>> 
Card>> 
(>> 
)>> 
{?? 
CardId@@ 
=@@ 
$num@@ 
,@@ 

FrontImageAA 
=AA  
$strAA! l
,AAl m

CardDeckIdBB 
=BB  
$numBB! "
}CC 
,CC 
newDD 
CardDD 
(DD 
)DD 
{EE 
CardIdFF 
=FF 
$numFF 
,FF 

FrontImageGG 
=GG  
$strGG! l
,GGl m

CardDeckIdHH 
=HH  
$numHH! "
}II 
,II 
newJJ 
CardJJ 
(JJ 
)JJ 
{KK 
CardIdLL 
=LL 
$numLL 
,LL 

FrontImageMM 
=MM  
$strMM! l
,MMl m

CardDeckIdNN 
=NN  
$numNN! "
}OO 
,OO 
newPP 
CardPP 
(PP 
)PP 
{QQ 
CardIdRR 
=RR 
$numRR 
,RR  

FrontImageSS 
=SS  
$strSS! m
,SSm n

CardDeckIdTT 
=TT  
$numTT! "
}UU 
,UU 
newVV 
CardVV 
(VV 
)VV 
{WW 
CardIdXX 
=XX 
$numXX 
,XX  

FrontImageYY 
=YY  
$strYY! m
,YYm n

CardDeckIdZZ 
=ZZ  
$numZZ! "
}[[ 
)\\ 
;\\ 
}]] 	
}^^ 
}__ ˛
SC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str %
)% &
]& '
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str ,
), -
]- .
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str '
)' (
]( )
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str ?
)? @
]@ A
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *Ä
ZC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\AccountRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public 

class 
AccountRepository "
:# $

Repository% /
</ 0
Account0 7
>7 8
,8 9
IAccountRepository: L
{ 
public 
MemoryGameContext  
MemoryGameContext! 2
{ 	
get 
{ 
return 
_context 
as  "
MemoryGameContext# 4
;4 5
} 
} 	
public 
AccountRepository  
(  !
	DbContext! *
context+ 2
)2 3
:4 5
base6 :
(: ;
context; B
)B C
{D E
}F G
public&& 
Account&& $
GetAccountWithPlayerInfo&& /
(&&/ 0
string&&0 6
username&&7 ?
)&&? @
{'' 	

IQueryable(( 
<(( 
Account(( 
>(( 
accountsRetrieved((  1
=((2 3
MemoryGameContext((4 E
.((E F
Accounts((F N
.((N O
Where((O T
(((T U
account((U \
=>((] _
account((` g
.((g h
Username((h p
==((q s
username((t |
)((| }
;((} ~
if)) 
()) 
accountsRetrieved)) !
!=))" $
null))% )
)))) *
{** 
Account++ 
account++ 
=++  !
accountsRetrieved++" 3
.++3 4
First++4 9
(++9 :
)++: ;
;++; <
return,, 
account,, 
;,, 
}-- 
return.. 
null.. 
;.. 
}// 	
public99 
IEnumerable99 
<99 
Account99 "
>99" #-
!GetNumberOfAccountsWithPlayerInfo99$ E
(99E F
int99F I)
numberOfAccountsToBeRetrieved99J g
)99g h
{:: 	
IEnumerable;; 
<;; 
Account;; 
>;;  
accounts;;! )
=;;* +
new;;, /
List;;0 4
<;;4 5
Account;;5 <
>;;< =
(;;= >
);;> ?
;;;? @
IEnumerable<< 
<<< 
Account<< 
><<  
accountsRetrieved<<! 2
=<<3 4
MemoryGameContext<<5 F
.<<F G
Accounts<<G O
.<<O P
Include<<P W
(<<W X
$str<<X `
)<<` a
;<<a b
if== 
(== 
accountsRetrieved==  
!===! #
null==$ (
)==( )
{>> 
accounts?? 
=?? 
accountsRetrieved?? ,
.??, -
OrderByDescending??- >
(??> ?
account??? F
=>??G I
account??J Q
.??Q R
Player??R X
.??X Y
Score??Y ^
)??^ _
.@@ 
Take@@ 
(@@ )
numberOfAccountsToBeRetrieved@@ 7
)@@7 8
;@@8 9
}AA 
returnBB 
accountsBB 
;BB 
}CC 	
}DD 
}EE ø
[C:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\CardDeckRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public 

class 
CardDeckRepository #
:$ %

Repository& 0
<0 1
CardDeck1 9
>9 :
,: ;
ICardDeckRepository< O
{ 
public 
MemoryGameContext  
MemoryGameContext! 2
{ 	
get 
{ 
return 
_context 
as  "
MemoryGameContext# 4
;4 5
} 
} 	
public 
CardDeckRepository !
(! "
	DbContext" +
context, 3
)3 4
:5 6
base7 ;
(; <
context< C
)C D
{E F
}G H
public%% 
CardDeck%% 
GetCardDeckAndCards%% +
(%%+ ,
int%%, /

cardDeckId%%0 :
)%%: ;
{&& 	
IEnumerable'' 
<'' 
CardDeck''  
>''  !
cardDecksRetrieved''" 4
=''5 6
MemoryGameContext''7 H
.''H I
	CardDecks''I R
.''R S
Include''S Z
(''Z [
$str''[ b
)''b c
.(( 
Where(( 
((( 
cardDeck(( 
=>((  "
cardDeck((# +
.((+ ,

CardDeckId((, 6
==((7 9

cardDeckId((: D
)((D E
;((E F
if)) 
()) 
cardDecksRetrieved)) "
.))" #
Any))# &
())& '
)))' (
)))( )
{** 
CardDeck++ )
cardDeckRetrievedFromDatabase++ 6
=++7 8
cardDecksRetrieved++9 K
.++K L
First++L Q
(++Q R
)++R S
;++S T
return,, )
cardDeckRetrievedFromDatabase,, 4
;,,4 5
}-- 
return.. 
null.. 
;.. 
}// 	
}11 
}22 á
[C:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\IAccountRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public 

	interface 
IAccountRepository '
:( )
IRepository* 5
<5 6
Account6 =
>= >
{ 
Account $
GetAccountWithPlayerInfo (
(( )
string) /
username0 8
)8 9
;9 :
IEnumerable 
< 
Account 
> -
!GetNumberOfAccountsWithPlayerInfo >
(> ?
int? B)
numberOfAccountsToBeRetrievedC `
)` a
;a b
} 
} °
\C:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\ICardDeckRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public

 

	interface

 
ICardDeckRepository

 (
:

) *
IRepository

+ 6
<

6 7
CardDeck

7 ?
>

? @
{ 
CardDeck 
GetCardDeckAndCards $
($ %
int% (

cardDeckId) 3
)3 4
;4 5
} 
} „
ZC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\IPlayerRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public

 

	interface

 
IPlayerRepository

 &
:

' (
IRepository

) 4
<

4 5
Player

5 ;
>

; <
{ 
void *
UpdateScoreOfPlayersAfterMatch +
(+ ,
string, 2
username3 ;
,; <
int= @
scoreA F
)F G
;G H
Player  
FindPlayerByUsername #
(# $
string$ *
username+ 3
)3 4
;4 5
} 
} ˆ
TC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\IRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public 

	interface 
IRepository  
<  !
TEntity! (
>( )
where* /
TEntity0 7
:8 9
class: ?
{ 
TEntity 
Get 
( 
object 
id 
) 
; 
IEnumerable 
< 
TEntity 
> 
GetAll #
(# $
)$ %
;% &
IEnumerable 
< 
TEntity 
> 
Find !
(! "
Func" &
<& '
TEntity' .
,. /
bool0 4
>4 5
	predicate6 ?
)? @
;@ A
TEntity&& 
FindFirstOccurence&& "
(&&" #
Func&&# '
<&&' (
TEntity&&( /
,&&/ 0
bool&&1 5
>&&5 6
	predicate&&7 @
)&&@ A
;&&A B
void,, 
Add,, 
(,, 
TEntity,, 
entity,, 
),,  
;,,  !
void22 
AddRange22 
(22 
IEnumerable22 !
<22! "
TEntity22" )
>22) *
entities22+ 3
)223 4
;224 5
void99 
Remove99 
(99 
TEntity99 
entity99 "
)99" #
;99# $
void?? 
RemoveRange?? 
(?? 
IEnumerable?? $
<??$ %
TEntity??% ,
>??, -
entities??. 6
)??6 7
;??7 8
}@@ 
}AA ˜
YC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\PlayerRepository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public 

class 
PlayerRepository !
:" #

Repository$ .
<. /
Player/ 5
>5 6
,6 7
IPlayerRepository8 I
{ 
public 
MemoryGameContext  
MemoryGameContext! 2
{ 	
get 
{ 
return 
_context 
as  "
MemoryGameContext# 4
;4 5
} 
} 	
public 
PlayerRepository 
(  
MemoryGameContext  1
context2 9
)9 :
:: ;
base; ?
(? @
context@ G
)G H
{I J
}K L
public$$ 
void$$ *
UpdateScoreOfPlayersAfterMatch$$ 2
($$2 3
string$$3 9
username$$: B
,$$B C
int$$D G
score$$H M
)$$M N
{%% 	
IEnumerable&& 
<&& 
Account&& 
>&&  
retrievedAccounts&&! 2
=&&3 4
MemoryGameContext&&5 F
.&&F G
Accounts&&G O
.&&O P
Include&&P W
(&&W X
$str&&X `
)&&` a
.'' 
Where'' 
('' 
account'' 
=>'' !
account''" )
.'') *
Username''* 2
==''3 5
username''6 >
)''> ?
;''? @
if(( 
((( 
retrievedAccounts(( !
.((! "
Count((" '
(((' (
)((( )
==((* ,
$num((- .
)((. /
{((/ 0
Account)) 
account)) 
=))  !
retrievedAccounts))" 3
.))3 4
First))4 9
())9 :
))): ;
;)); <
Player** 
player** 
=** 
account**  '
.**' (
Player**( .
;**. /
player++ 
.++ 
Score++ 
+=++ 
score++  %
;++% &
},, 
}-- 	
public44 
Player44  
FindPlayerByUsername44 *
(44* +
string44+ 1
username442 :
)44: ;
{55 	
IEnumerable66 
<66 
Account66 
>66  
retrievedAccounts66! 2
=663 4
MemoryGameContext665 F
.66F G
Accounts66G O
.66O P
Include66P W
(66W X
$str66X `
)66` a
.77 
Where77 
(77 
account77 
=>77 !
account77" )
.77) *
Username77* 2
==773 5
username776 >
)77> ?
;77? @
if88 
(88 
retrievedAccounts88  
.88  !
Count88! &
(88& '
)88' (
==88) +
$num88, -
)88- .
{99 
Account:: 
account:: 
=::  !
retrievedAccounts::" 3
.::3 4
First::4 9
(::9 :
)::: ;
;::; <
return;; 
account;; 
.;; 
Player;; %
;;;% &
}<< 
return== 
null== 
;== 
}>> 	
}?? 
}@@ ˘0
SC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Repositories\Repository.cs
	namespace 	

DataAccess
 
. 
Repositories !
{ 
public11 

class11 

Repository11 
<11 
TEntity11 #
>11# $
:11% &
IRepository11' 2
<112 3
TEntity113 :
>11: ;
where22 
TEntity22 
:22 
class22 
{33 
	protected88 
readonly88 
	DbContext88 $
_context88% -
;88- .
public== 

Repository== 
(== 
	DbContext== #
context==$ +
)==+ ,
{>> 	
_context?? 
=?? 
context?? 
;?? 
}@@ 	
publicGG 
TEntityGG 
GetGG 
(GG 
objectGG !
idGG" $
)GG$ %
{HH 	
returnII 
_contextII 
.II 
SetII 
<II  
TEntityII  '
>II' (
(II( )
)II) *
.II* +
FindII+ /
(II/ 0
idII0 2
)II2 3
;II3 4
}JJ 	
publicPP 
IEnumerablePP 
<PP 
TEntityPP "
>PP" #
GetAllPP$ *
(PP* +
)PP+ ,
{QQ 	
returnRR 
_contextRR 
.RR 
SetRR 
<RR  
TEntityRR  '
>RR' (
(RR( )
)RR) *
.RR* +
ToListRR+ 1
(RR1 2
)RR2 3
;RR3 4
}SS 	
publicZZ 
IEnumerableZZ 
<ZZ 
TEntityZZ "
>ZZ" #
FindZZ$ (
(ZZ( )
FuncZZ) -
<ZZ- .
TEntityZZ. 5
,ZZ5 6
boolZZ7 ;
>ZZ; <
	predicateZZ= F
)ZZF G
{[[ 	
IEnumerable\\ 
<\\ 
TEntity\\ 
>\\  
matchingResults\\! 0
=\\1 2
new\\3 6
List\\7 ;
<\\; <
TEntity\\< C
>\\C D
(\\D E
)\\E F
;\\F G
if]] 
(]] 
	predicate]] 
!=]] 
null]] !
)]]! "
{^^ 
matchingResults__ 
=__  !
_context__" *
.__* +
Set__+ .
<__. /
TEntity__/ 6
>__6 7
(__7 8
)__8 9
.__9 :
Where__: ?
(__? @
	predicate__@ I
)__I J
;__J K
}`` 
returnaa 
matchingResultsaa "
;aa" #
}bb 	
publicii 
TEntityii 
FindFirstOccurenceii )
(ii) *
Funcii* .
<ii. /
TEntityii/ 6
,ii6 7
boolii8 <
>ii< =
	predicateii> G
)iiG H
{jj 	
IEnumerablekk 
<kk 
TEntitykk 
>kk  
resultskk! (
=kk) *
_contextkk+ 3
.kk3 4
Setkk4 7
<kk7 8
TEntitykk8 ?
>kk? @
(kk@ A
)kkA B
.kkB C
WherekkC H
(kkH I
	predicatekkI R
)kkR S
;kkS T
ifll 
(ll 
resultsll 
.ll 
Anyll 
(ll 
)ll 
)ll 
{mm 
returnnn 
resultsnn 
.nn 
Firstnn $
(nn$ %
)nn% &
;nn& '
}oo 
returnpp 
nullpp 
;pp 
}qq 	
publicww 
voidww 
Addww 
(ww 
TEntityww 
entityww  &
)ww& '
{xx 	
ifyy 
(yy 
entityyy 
!=yy 
nullyy 
)yy 
{zz 
_context{{ 
.{{ 
Set{{ 
<{{ 
TEntity{{ $
>{{$ %
({{% &
){{& '
.{{' (
Add{{( +
({{+ ,
entity{{, 2
){{2 3
;{{3 4
}|| 
}}} 	
public
ÉÉ 
void
ÉÉ 
AddRange
ÉÉ 
(
ÉÉ 
IEnumerable
ÉÉ (
<
ÉÉ( )
TEntity
ÉÉ) 0
>
ÉÉ0 1
entities
ÉÉ2 :
)
ÉÉ: ;
{
ÑÑ 	
if
ÖÖ 
(
ÖÖ 
entities
ÖÖ 
!=
ÖÖ 
null
ÖÖ 
&&
ÖÖ  "
entities
ÖÖ# +
.
ÖÖ+ ,
Any
ÖÖ, /
(
ÖÖ/ 0
)
ÖÖ0 1
)
ÖÖ1 2
{
ÜÜ 
_context
áá 
.
áá 
Set
áá 
<
áá 
TEntity
áá $
>
áá$ %
(
áá% &
)
áá& '
.
áá' (
AddRange
áá( 0
(
áá0 1
entities
áá1 9
)
áá9 :
;
áá: ;
}
àà 
}
ââ 	
public
êê 
void
êê 
Remove
êê 
(
êê 
TEntity
êê "
entity
êê# )
)
êê) *
{
ëë 	
if
íí 
(
íí 
entity
íí 
!=
íí 
null
íí 
)
íí 
{
ìì 
_context
îî 
.
îî 
Set
îî 
<
îî 
TEntity
îî $
>
îî$ %
(
îî% &
)
îî& '
.
îî' (
Remove
îî( .
(
îî. /
entity
îî/ 5
)
îî5 6
;
îî6 7
}
ïï 
}
ññ 	
public
úú 
void
úú 
RemoveRange
úú 
(
úú  
IEnumerable
úú  +
<
úú+ ,
TEntity
úú, 3
>
úú3 4
entities
úú5 =
)
úú= >
{
ùù 	
if
ûû 
(
ûû 
entities
ûû 
!=
ûû 
null
ûû 
&&
ûû  "
entities
ûû# +
.
ûû+ ,
Any
ûû, /
(
ûû/ 0
)
ûû0 1
)
ûû1 2
{
üü 
_context
†† 
.
†† 
Set
†† 
<
†† 
TEntity
†† $
>
††$ %
(
††% &
)
††& '
.
††' (
RemoveRange
††( 3
(
††3 4
entities
††4 <
)
††< =
;
††= >
}
°° 
}
¢¢ 	
}
££ 
}§§ ü
UC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Units of work\IUnitOfWork.cs
	namespace 	

DataAccess
 
. 
Units_of_work "
{ 
public 

	interface 
IUnitOfWork  
:! "
IDisposable# .
{ 
IPlayerRepository 
Players !
{" #
get$ '
;' (
}) *
ICardDeckRepository 
	CardDecks %
{& '
get( +
;+ ,
}- .
IRepository 
< 
Match 
> 
Matches "
{# $
get% (
;( )
}* +
IAccountRepository 
Accounts #
{$ %
get& )
;) *
}+ ,
int&& 
Complete&& 
(&& 
)&& 
;&& 
}'' 
}(( ö
TC:\Users\Adair Hern√°ndez\source\repos\memory\DataAccess\Units of work\UnitOfWork.cs
	namespace 	

DataAccess
 
. 
Units_of_work "
{ 
public 

class 

UnitOfWork 
: 
IUnitOfWork )
{ 
private 
readonly 
MemoryGameContext *
_context+ 3
;3 4
public 
IPlayerRepository  
Players! (
{) *
get+ .
;. /
private0 7
set8 ;
;; <
}= >
public 
ICardDeckRepository "
	CardDecks# ,
{- .
get/ 2
;2 3
private4 ;
set< ?
;? @
}A B
public 
IRepository 
< 
Match  
>  !
Matches" )
{* +
get, /
;/ 0
private1 8
set9 <
;< =
}> ?
public!! 
IAccountRepository!! !
Accounts!!" *
{!!+ ,
get!!- 0
;!!0 1
private!!2 9
set!!: =
;!!= >
}!!? @
public'' 

UnitOfWork'' 
('' 
MemoryGameContext'' +
context'', 3
)''3 4
{(( 	
_context)) 
=)) 
context)) 
;)) 
Players** 
=** 
new** 
PlayerRepository** *
(*** +
_context**+ 3
)**3 4
;**4 5
	CardDecks++ 
=++ 
new++ 
CardDeckRepository++ .
(++. /
_context++/ 7
)++7 8
;++8 9
Matches,, 
=,, 
new,, 

Repository,, $
<,,$ %
Match,,% *
>,,* +
(,,+ ,
_context,,, 4
),,4 5
;,,5 6
Accounts-- 
=-- 
new-- 
AccountRepository-- ,
(--, -
_context--- 5
)--5 6
;--6 7
}.. 	
public44 
int44 
Complete44 
(44 
)44 
{55 	
return66 
_context66 
.66 
SaveChanges66 '
(66' (
)66( )
;66) *
}77 	
public<< 
void<< 
Dispose<< 
(<< 
)<< 
{== 	
_context>> 
.>> 
Dispose>> 
(>> 
)>> 
;>> 
}?? 	
}@@ 
}AA 